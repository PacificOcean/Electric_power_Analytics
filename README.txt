                                                                    2016.05.10

                    夜間ノイズ帯算出ツールの使い方
                  ￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣
1. ツール概要
￣￣￣￣￣￣￣
  本ツールは、時系列電力データを入力として、給湯機の使用など、夜間に大きな電力を
  使っている時間帯を特定することができます。


2. インストール
￣￣￣￣￣￣￣￣
2.1. 動作環境
￣￣￣￣￣￣￣
  - OS：CentOS 7
  - Pythonバージョン：2.7.12（動作確認済）
  - Pythonモジュール：Anacondaでインストールされるモジュール

2.2. モジュール構成
￣￣￣￣￣￣￣￣￣￣
  - README.txt：本ドキュメント
  - find_NoiseTimeZone.py：実行モジュール
  - utils.py：内部モジュール（汎用関数を定義）

2.3. インストール方法
￣￣￣￣￣￣￣￣￣￣￣
  上記モジュールを同一のディレクトリ配下に配置します。


3. 使用方法
￣￣￣￣￣￣
  インストールディレクトリに移動して、以下のコマンドを実行します。

    # python find_NoiseTimeZone.py <in_path> <tgt_col> <out_path> <buf_range>

　  in_path：入力ファイルの絶対パスを指定
    tgt_col：電力値データのカラム名を指定
    out_path：出力ファイルの絶対パスを指定
    buf_range：時間帯のバッファ幅(0.5単位の数値)を指定
               →季節変化による夜間ノイズ帯幅の調整用。
                 お客様要望により可変パラメータとするが、「0.5」を指定

  インストールディレクトリに移動せずに、以下の様に、コマンドのパスを指定して、
  実行することもできます。

    # python /tmp/tooldir/find_NoiseTimeZone.py <in_path> <tgt_col> <out_path> <buf_range>


4. コマンドI/F仕様
￣￣￣￣￣￣￣￣￣￣
4.1. 入力ファイルの条件
￣￣￣￣￣￣￣￣￣￣￣￣
  - ファイルの形式はCSVであること
  - 改行コードはLFであること
  - 1レコードが1時点を表す、時系列データであること
  - カラム名は必須、インデックス有無は問わない
  - 以下を表すデータが含まれること
    - 日時
    - 電力値
  - 日時データのカラム名は「timestamps」であること
  - 日時データの形式は yyyy-MM-dd HH:mm:ss であること
     (例えば、2015-01-01 12:34:56)
  - 電力値データのカラム名は、半角英字であること
    （全角文字も動作するが、文字コードや環境依存の問題を考慮し、制限する）
  - 電力値データは、数値データであること
  - 日時および電力データの欠損値は、空値であること
    （実際は、""やNAなど、python(pandas)が欠損値とみなすものであれば動作可能）
    欠損データをレコードごと削除されている場合は問題ない

4.2. 出力ファイルの形式
￣￣￣￣￣￣￣￣￣￣￣￣
  夜間ノイズ帯の開始時刻、終了時刻および、内部情報を6行1列で記載した
  CSVファイル。内容は以下のとおり
   - カラム名：「NoiseTimeZone」
   - 1行目:開始時間 float型(例えば、23:00ならば23.0、1:30ならば1.5)
   - 2行目:終了時刻 float型(例えば、6:00ならば6.0、7:30ならば7.5)
   - 3行目:内部情報1 (開始時間の平均値)
   - 4行目:内部情報2 (開始時間の標準偏差)
   - 5行目:内部情報3 (終了時間の平均値)
   - 6行目:内部情報4 (終了時間の標準偏差)

  出力例：
    NoiseTimeZone
    1.5
    8.5
    3.76298463789
    1.68684115485
    6.51433236575
    1.6091384383

4.3. コマンド引数
￣￣￣￣￣￣￣￣￣
  3. 使用方法を参照

4.4. 復帰値
￣￣￣￣￣￣
  正常終了：0
  異常終了：0以外


5. ログの管理
￣￣￣￣￣￣￣
  コマンド側ではログファイルは作成しない


6. メッセージの出力先
￣￣￣￣￣￣￣￣￣￣￣
  標準出力または、標準エラー出力に出力する

                                                                      －以上－
